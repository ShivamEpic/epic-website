<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1 style="text-align:center;">Checkout</h1>

<div class="checkout-box">

  <div id="summary"></div>
  <h2 id="amount"></h2>

  <img src="upi-qr.png" class="qr">

  <button onclick="confirmPaid()" class="paid-btn">
    I Have Paid – Send Screenshot
  </button>
<input
  type="text"
  id="coupon"
  placeholder="Enter coupon code"
/>

<button onclick="applyCoupon()">Apply</button>

<p id="discountMsg"></p>
</div>

<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];

let summaryText = "";
let total = 0;

cart.forEach(item => {
  summaryText += `${item.name} (x${item.qty})\n`;
  total += item.price * item.qty;
});

document.getElementById("summary").innerText =
  summaryText || "No items in cart";

document.getElementById("amount").innerText =
  "Pay Amount: ₹" + total;

// SAVE ORDER
let orders = JSON.parse(localStorage.getItem("orders")) || [];
orders.push({
  items: summaryText,
  total: total,
  status: "Payment Pending"
});
localStorage.setItem("orders", JSON.stringify(orders));

function confirmPaid() {
  alert("Payment marked as sent. We will verify.");
  localStorage.removeItem("cart");
  window.location.href = "orders.html";
}
  function applyCoupon() {
  const code = document.getElementById("coupon").value.trim();
  const msg = document.getElementById("discountMsg");

  if (code === "POKE10") {
    msg.innerText = "Coupon applied! 10% off";
    msg.style.color = "green";
  } else {
    msg.innerText = "Invalid coupon";
    msg.style.color = "red";
  }
</script>

</body>
</html>
